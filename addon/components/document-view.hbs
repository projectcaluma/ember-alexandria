<div
  class="uk-flex uk-overflow-hidden uk-height-max-1 uk-height-1-1"
  data-test-document-view
>
  <div
    class="uk-width-1 uk-flex uk-flex-column uk-overflow-hidden uk-height-max-1"
  >
    <div class="uk-flex uk-flex-middle uk-padding-small">
      <DocumentUploadButton
        @categoryId={{@filters.category}}
        @afterUpload={{this.refreshDocumentList}}
        data-test-upload
      />

      <TagFilter
        @category={{@filters.category}}
        @documents={{this.fetchedDocuments.value}}
        @selectedTags={{@filters.tags}}
        @selectedMarks={{@filters.marks}}
        class="uk-margin-left"
      />

      <DocumentViewToggle
        @viewList={{this.listView}}
        data-test-toggle-side-panel
        {{on "click" this.toggleView}}
      />
      <SidePanelToggle />
    </div>

    {{! Drag'n'Drop Area }}
    <div
      class="uk-position-relative uk-height-1-1
        {{if this.isDragOver 'document-grid--dragover'}}
        {{unless this.canDrop 'document-grid--disallowed'}}
        "
      {{on "dragenter" this.onDragEnter}}
      {{on "dragleave" this.onDragLeave}}
      {{on "dragover" this.onDragOver}}
      {{on "drop" this.onDrop.perform}}
    >
      <div
        class="uk-position-cover uk-padding-small uk-height-1-1 uk-overflow-auto"
        ...attributes
      >
        <div
          class="document-view"
          {{did-insert (perform this.initialiseDocumentSelection)}}
        >
          {{! List & Grid View }}
          {{#if this.listView}}
            <DocumentList
              @columns={{this.tableColumns}}
              @loading={{this.fetchedDocuments.isRunning}}
              @fetchedDocuments={{this.fetchedDocuments.value}}
              @setSort={{this.setSort}}
              @selectedDocuments={{this.documents.selectedDocuments}}
              @onClickDocument={{this.handleDocumentSelection}}
              @onDoubleClickDocument={{this.openDocument.perform}}
              @onDragStart={{this.dragDocument}}
            />
          {{else}}
            <DocumentGrid
              @loading={{this.fetchedDocuments.isRunning}}
              @fetchedDocuments={{this.fetchedDocuments.value}}
              @selectedDocuments={{this.documents.selectedDocuments}}
              @onClickDocument={{this.handleDocumentSelection}}
              @onDoubleClickDocument={{this.openDocument.perform}}
              @onDragStart={{this.dragDocument}}
            />
          {{/if}}
        </div>
      </div>
      {{#if this.isDragOver}}
        <button
          class="uk-width-1 uk-padding-remove uk-position-bottom uk-button uk-button-primary"
          type="button"
        >
          {{#if this.onDrop.isRunning}}
            <UkSpinner />
          {{else if this.canDrop}}
            {{t "alexandria.document-grid.drop-to-upload"}}
          {{else}}
            {{t "alexandria.document-grid.drop-not-allowed"}}
          {{/if}}
        </button>
      {{/if}}
    </div>
  </div>
  <DocumentsSidePanel
    @selectedDocuments={{this.documents.selectedDocuments}}
    @refreshDocumentList={{this.refreshDocumentList}}
  />
</div>

<div
  class="drag-info uk-background-default uk-box-shadow-medium uk-border-rounded uk-width-auto"
  {{did-insert this.registerDragInfo}}
>
  {{t "alexandria.move-document" count=this.documents.selectedDocuments.length}}
</div>